<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fees Governance System - Interactive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #1E3A8A;
            --light-blue: #3B82F6;
            --gold: #D4AF37;
            --dark-gold: #B8941F;
            --white: #FFFFFF;
            --light-gray: #F8FAFC;
            --border-gray: #E2E8F0;
            --text-dark: #1E293B;
            --text-gray: #64748B;
            --shadow: 0 2px 16px rgba(30, 58, 138, 0.08);
            --shadow-lg: 0 8px 32px rgba(30, 58, 138, 0.15);
            --gold-shadow: 0 4px 20px rgba(212, 175, 55, 0.3);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
            background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 50%, #60A5FA 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .hero {
            text-align: center;
            padding: 60px 20px 40px;
            color: white;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 56px;
            font-weight: 700;
            letter-spacing: -0.5px;
            margin-bottom: 16px;
            text-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
        }

        .hero p {
            font-size: 21px;
            font-weight: 400;
            opacity: 0.95;
            margin-bottom: 8px;
        }

        .hero .subtitle {
            font-size: 17px;
            opacity: 0.85;
            font-weight: 300;
        }

        .demo-container {
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--apple-dark);
        }

        .roles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .role-card {
            background: var(--white);
            border: 2px solid var(--border-gray);
            border-radius: 16px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .role-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--gold), var(--dark-gold));
            transform: scaleX(0);
            transition: transform 0.3s;
        }

        .role-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .role-card:hover::before {
            transform: scaleX(1);
        }

        .role-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            font-size: 28px;
            box-shadow: var(--shadow);
        }

        .role-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .role-name {
            font-size: 15px;
            color: var(--text-gray);
            margin-bottom: 12px;
        }

        .role-features {
            list-style: none;
            font-size: 14px;
            color: var(--text-gray);
        }

        .role-features li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
        }

        .role-features li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--gold);
            font-weight: bold;
        }

        .demo-btn {
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            color: var(--white);
            border: none;
            padding: 12px 28px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 16px;
            transition: all 0.3s;
            box-shadow: var(--gold-shadow);
        }

        .demo-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.4);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-top: 30px;
        }

        .feature-card {
            background: var(--white);
            border: 1px solid var(--border-gray);
            border-radius: 16px;
            padding: 24px;
            transition: transform 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--gold);
        }

        .feature-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .feature-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-blue);
        }

        .feature-desc {
            font-size: 14px;
            color: var(--text-gray);
            line-height: 1.5;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: var(--gold);
            opacity: 0.1;
            border-radius: 50%;
        }

        .stat-value {
            font-size: 40px;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .credentials {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFFBF0 100%);
            border: 2px solid var(--gold);
            border-radius: 16px;
            padding: 24px;
            margin: 30px 0;
        }

        .credentials h3 {
            font-size: 20px;
            margin-bottom: 16px;
            color: var(--text-dark);
        }

        .cred-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .cred-item {
            background: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            border: 1px solid var(--border-gray);
        }

        .cred-item strong {
            color: var(--gold);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 40px;
            position: relative;
            animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--apple-gray);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            line-height: 1;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: var(--apple-border);
            transform: rotate(90deg);
        }

        .dashboard-preview {
            border: 2px solid var(--border-gray);
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
            background: var(--light-gray);
        }

        .preview-section {
            margin-bottom: 24px;
        }

        .preview-section h4 {
            font-size: 18px;
            margin-bottom: 12px;
            color: var(--primary-blue);
        }

        .preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .preview-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border-gray);
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .preview-value {
            font-size: 28px;
            font-weight: 600;
            color: var(--gold);
            margin-bottom: 8px;
        }

        .preview-label {
            font-size: 13px;
            color: var(--text-gray);
            line-height: 1.4;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        .action-btn {
            flex: 1;
            min-width: 200px;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            color: white;
            box-shadow: var(--gold-shadow);
        }

        .action-btn.secondary {
            background: var(--white);
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .fullscreen-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.3);
        }

        .fullscreen-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 58, 138, 0.4);
            background: linear-gradient(135deg, var(--light-blue), var(--primary-blue));
        }

        .fullscreen-icon {
            font-size: 20px;
            line-height: 1;
        }

        /* Fullscreen modal styles */
        .modal:fullscreen {
            background: var(--white);
            padding: 20px;
        }

        .modal:-webkit-full-screen {
            background: var(--white);
            padding: 20px;
        }

        .modal:-moz-full-screen {
            background: var(--white);
            padding: 20px;
        }

        .modal:-ms-fullscreen {
            background: var(--white);
            padding: 20px;
        }

        .modal:fullscreen .modal-content {
            max-width: 100%;
            max-height: 100%;
            margin: 0;
            overflow-y: auto;
        }

        .modal:-webkit-full-screen .modal-content {
            max-width: 100%;
            max-height: 100%;
            margin: 0;
            overflow-y: auto;
        }

        .system-capabilities {
            background: var(--white);
            border-radius: 16px;
            padding: 24px;
            margin-top: 20px;
            border: 2px solid var(--gold);
        }

        .capability-section {
            margin-bottom: 20px;
        }

        .capability-section h5 {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--gold);
        }

        .capability-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 8px;
            list-style: none;
            padding: 0;
        }

        .capability-list li {
            padding: 8px 12px;
            background: var(--light-gray);
            border-radius: 8px;
            font-size: 13px;
            color: var(--text-gray);
            position: relative;
            padding-left: 28px;
        }

        .capability-list li::before {
            content: '‚óÜ';
            position: absolute;
            left: 10px;
            color: var(--gold);
            font-size: 10px;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 36px;
            }

            .hero p {
                font-size: 18px;
            }

            .demo-container {
                padding: 24px;
            }

            .section-title {
                font-size: 24px;
            }

            .modal-content {
                padding: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Logo Header - Top Left (No Card) -->
        <div style="position: absolute; top: 15px; left: 20px; z-index: 100;">
            <svg width="140" height="45" viewBox="0 0 140 45" xmlns="http://www.w3.org/2000/svg">
            <!-- Digital Network Background -->
            <defs>
                <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:0.9" />
                    <stop offset="50%" style="stop-color:#D4AF37;stop-opacity:0.9" />
                    <stop offset="100%" style="stop-color:#FFFFFF;stop-opacity:0.9" />
                </linearGradient>
            </defs>
            
            <!-- Abstract Digital Flow Lines -->
            <path d="M8,22 Q23,12 38,22 T68,22" stroke="url(#logoGradient)" stroke-width="1.5" fill="none" opacity="0.5"/>
            <path d="M8,26 Q23,36 38,26 T68,26" stroke="url(#logoGradient)" stroke-width="1.5" fill="none" opacity="0.5"/>
            
            <!-- Connection Nodes -->
            <circle cx="8" cy="22" r="2" fill="#D4AF37" opacity="0.9"/>
            <circle cx="38" cy="22" r="2" fill="#FFFFFF" opacity="0.9"/>
            <circle cx="68" cy="22" r="2" fill="#D4AF37" opacity="0.9"/>
            
            <!-- M.A Initials (Prominent) - White with Gold Shadow -->
            <text x="6" y="18" font-family="Arial, sans-serif" font-size="15" font-weight="700" fill="#FFFFFF" stroke="#D4AF37" stroke-width="0.4">M.A</text>
            
            <!-- Simplify The Vision Text - White -->
            <text x="6" y="32" font-family="Arial, sans-serif" font-size="8" font-weight="600" fill="#FFFFFF" letter-spacing="0.5" opacity="0.95">Simplify The Vision</text>
            
            <!-- Digital Accent Line - Gold -->
            <line x1="6" y1="35" x2="70" y2="35" stroke="#D4AF37" stroke-width="1.5" opacity="0.8"/>
        </svg>
        </div>
        
        <!-- Page Header - Center -->
        <div style="text-align: center; padding: 60px 0 20px 0;">
            <h2 style="color: #D4AF37; font-size: 20px; font-weight: 600; margin: 0 0 5px 0;">Fees Governance System</h2>
            <p style="color: #D4AF37; font-size: 13px; font-weight: 500; margin: 0; opacity: 0.9;">Interactive Demo Experience</p>
        </div>
        
        <!-- System Stats -->
        <div class="demo-container">
            <h2 class="section-title" style="text-align: center; margin-bottom: 30px; color: var(--gold);">
                ‚≠ê Golden Rules
            </h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">98%</div>
                    <div class="stat-label">Global Threshold 2026</div>
                    <div style="font-size: 11px; color: #D4AF37; margin-top: 8px;">
                        Minimum satisfaction rate
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">4</div>
                    <div class="stat-label">Satisfaction States</div>
                    <div style="font-size: 11px; color: #D4AF37; margin-top: 8px;">
                        Not Satisfied ‚Üí Satisfied
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Q vs Q</div>
                    <div class="stat-label">Quarterly Comparison</div>
                    <div style="font-size: 11px; color: #D4AF37; margin-top: 8px;">
                        Quarter-over-Quarter analysis
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Y vs Y</div>
                    <div class="stat-label">Annual Comparison</div>
                    <div style="font-size: 11px; color: #D4AF37; margin-top: 8px;">
                        Year-over-Year tracking
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: linear-gradient(135deg, rgba(30, 58, 138, 0.05), rgba(212, 175, 55, 0.05)); border-radius: 16px; border: 2px solid var(--gold);">
                <h3 style="color: var(--primary-blue); text-align: center; margin-bottom: 20px; font-size: 18px;">
                    üìã Core System Principles
                </h3>
                
                <!-- CRITICAL GOVERNANCE PRINCIPLE -->
                <div style="padding: 16px; background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(30, 58, 138, 0.05)); border-radius: 12px; border-left: 4px solid var(--gold); margin-bottom: 20px;">
                    <div style="display: flex; align-items: start; gap: 12px;">
                        <div style="font-size: 24px; line-height: 1;">üèÜ</div>
                        <div>
                            <div style="color: var(--gold); font-weight: bold; font-size: 15px; margin-bottom: 8px;">‚úì Single Golden Reference</div>
                            <div style="font-size: 14px; color: var(--text-dark); line-height: 1.6; margin-bottom: 8px;">
                                <strong>Approved fee definitions and published customer tariffs are the single golden reference.</strong><br>
                                All GL / PL postings must be reconciled and validated against these approved and published fees.
                            </div>
                            <div style="font-size: 12px; color: var(--text-gray); padding: 8px; background: white; border-radius: 6px; margin-top: 8px;">
                                <strong>‚ÑπÔ∏è Clarification:</strong><br>
                                ‚Ä¢ <strong>Approved definitions</strong> = Fees approved via governance flow<br>
                                ‚Ä¢ <strong>Published fees</strong> = Fees officially communicated to customers<br>
                                ‚Ä¢ <strong>GL / PL</strong> = Financial reflection to be <em>compared against</em> approved tariffs (not the source of truth)
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                    <div style="padding: 12px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="color: var(--gold); font-weight: bold; margin-bottom: 4px;">‚úì GM Acknowledgment</div>
                        <div style="font-size: 13px; color: var(--text-gray);">
                            Required for conditionally eligible fees
                        </div>
                    </div>
                    <div style="padding: 12px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="color: var(--gold); font-weight: bold; margin-bottom: 4px;">‚úì CEO Final Approval</div>
                        <div style="font-size: 13px; color: var(--text-gray);">
                            Ultimate authority on satisfaction status
                        </div>
                    </div>
                    <div style="padding: 12px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="color: var(--gold); font-weight: bold; margin-bottom: 4px;">‚úì 3-Tier Exemptions</div>
                        <div style="font-size: 13px; color: var(--text-gray);">
                            Sector, Permanent, and Temporary
                        </div>
                    </div>
                    <div style="padding: 12px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="color: var(--gold); font-weight: bold; margin-bottom: 4px;">‚úì Quarterly Tracking</div>
                        <div style="font-size: 13px; color: var(--text-gray);">
                            Q1, Q2, Q3, Q4 comparison analytics
                        </div>
                    </div>
                    <div style="padding: 12px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="color: var(--gold); font-weight: bold; margin-bottom: 4px;">‚úì Annual Benchmarking</div>
                        <div style="font-size: 13px; color: var(--text-gray);">
                            Year-over-Year performance trends
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Roles -->
        <div class="demo-container">
            <h2 class="section-title">üë• Try Different User Roles</h2>
            
            <div class="roles-grid">
                <!-- GCEO Card -->
                <div class="role-card" onclick="showRoleDemo('gceo')">
                    <div class="role-icon">üëë</div>
                    <div class="role-title">Group Chief Executive Officer</div>
                    <div class="role-name">B.G</div>
                    <ul class="role-features">
                        <li>Executive Dashboard</li>
                        <li>Global Threshold Control</li>
                        <li>Exemptions Overview</li>
                        <li>Satisfaction Monitoring</li>
                        <li>Final Approvals</li>
                    </ul>
                    <button class="demo-btn">Explore Dashboard ‚Üí</button>
                </div>

                <!-- GM Retail Card -->
                <div class="role-card" onclick="showRoleDemo('retail')">
                    <div class="role-icon">üè¶</div>
                    <div class="role-title">GM Retail Banking</div>
                    <div class="role-name">Mr. D.A</div>
                    <ul class="role-features">
                        <li>Segment Analysis</li>
                        <li>Mass/Private/Tamayuz</li>
                        <li>Fee Performance</li>
                        <li>Customer Satisfaction</li>
                        <li>Retail Reports</li>
                    </ul>
                    <button class="demo-btn">Explore Dashboard ‚Üí</button>
                </div>

                <!-- GM Corporate Card -->
                <div class="role-card" onclick="showRoleDemo('corporate')">
                    <div class="role-icon">üè¢</div>
                    <div class="role-title">GM Corporate Banking</div>
                    <div class="role-name">Mr. T.F</div>
                    <ul class="role-features">
                        <li>Category Breakdown</li>
                        <li>Trade Finance</li>
                        <li>Corporate Services</li>
                        <li>FX Operations</li>
                        <li>Corporate Reports</li>
                    </ul>
                    <button class="demo-btn">Explore Dashboard ‚Üí</button>
                </div>

                <!-- GM Finance Card -->
                <div class="role-card" onclick="showRoleDemo('finance')">
                    <div class="role-icon">üí∞</div>
                    <div class="role-title">GM Finance</div>
                    <div class="role-name">Khalid Al-Mannai</div>
                    <ul class="role-features">
                        <li>Financial Reconciliation</li>
                        <li>Revenue Analysis</li>
                        <li>Collection Rates</li>
                        <li>Gap Analysis</li>
                        <li>Top Revenue Fees</li>
                    </ul>
                    <button class="demo-btn">Explore Dashboard ‚Üí</button>
                </div>

                <!-- GM Risk Card -->
                <div class="role-card" onclick="showRoleDemo('risk')">
                    <div class="role-icon">‚ö†Ô∏è</div>
                    <div class="role-title">GM Risk</div>
                    <div class="role-name">Sara Al-Mohannadi</div>
                    <ul class="role-features">
                        <li>Risk Monitoring</li>
                        <li>Exception Detection</li>
                        <li>Threshold Tracking</li>
                        <li>Risk Trends</li>
                        <li>Impact Analysis</li>
                    </ul>
                    <button class="demo-btn">Explore Dashboard ‚Üí</button>
                </div>

                <!-- GM Compliance Card -->
                <div class="role-card" onclick="showRoleDemo('compliance')">
                    <div class="role-icon">‚úÖ</div>
                    <div class="role-title">GM Compliance</div>
                    <div class="role-name">Omar Al-Malki</div>
                    <ul class="role-features">
                        <li>Policy Compliance</li>
                        <li>Exemptions Audit</li>
                        <li>Regulatory Metrics</li>
                        <li>Audit Trail</li>
                        <li>Compliance Reports</li>
                    </ul>
                    <button class="demo-btn">Explore Dashboard ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- System Features -->
        <div class="demo-container">
            <h2 class="section-title">‚ú® System Features</h2>
            <div class="features-grid">
                <div class="feature-card" onclick="showFeatureDetails('fee-management')">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-title">Fee Management</div>
                    <div class="feature-desc">47+ fees across Retail (Mass/Private/Tamayuz) and Corporate (Trade/Services/WPS/FX)</div>
                </div>
                <div class="feature-card" onclick="showFeatureDetails('threshold')">
                    <div class="feature-icon">üéØ</div>
                    <div class="feature-title">Threshold Control</div>
                    <div class="feature-desc">Global CEO threshold (98% for 2026) with fee-specific exceptions</div>
                </div>
                <div class="feature-card" onclick="showFeatureDetails('exemptions')">
                    <div class="feature-icon">üìã</div>
                    <div class="feature-title">Exemptions</div>
                    <div class="feature-desc">Sector, Permanent, and Temporary exemptions with full audit trail</div>
                </div>
                <div class="feature-card" onclick="showFeatureDetails('satisfaction')">
                    <div class="feature-icon">üìà</div>
                    <div class="feature-title">Satisfaction Engine</div>
                    <div class="feature-desc">4-state tracking: Not Satisfied ‚Üí Conditionally Eligible ‚Üí Pending ‚Üí Satisfied</div>
                </div>
                <div class="feature-card" onclick="showFeatureDetails('reports')">
                    <div class="feature-icon">üìÑ</div>
                    <div class="feature-title">Reports</div>
                    <div class="feature-desc">5 report types with PDF/Excel export capability</div>
                </div>
                <div class="feature-card" onclick="showFeatureDetails('security')">
                    <div class="feature-icon">üîí</div>
                    <div class="feature-title">Security</div>
                    <div class="feature-desc">JWT authentication, RBAC, audit logging, maker/checker controls</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Role Demos -->
    <div id="roleModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">‚úï</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        const roleDemos = {
            gceo: {
                title: 'üëë Group Chief Executive Officer Dashboard',
                name: 'B.G',
                data: [
                    { value: 'QAR 24.8M', label: 'Total Revenue 2026', trend: '+18%', comparison: 'vs 2025: QAR 21.0M' },
                    { value: '64%', label: 'Retail Banking Share', amount: 'QAR 15.9M', change: '+15%' },
                    { value: '36%', label: 'Corporate Banking Share', amount: 'QAR 8.9M', change: '+23%' },
                    { value: '98%', label: 'Target Threshold 2026', status: 'On Track' }
                ],
                features: [
                    'üìä Executive Summary: Bank-wide fee revenue performance',
                    'üè¶ Retail Banking (64%): QAR 15.9M - Mass, Private, Tamayuz segments',
                    'üè¢ Corporate Banking (36%): QAR 8.9M - Trade Finance, WPS, Corporate Services',
                    'üìà CEO Sets Growth Target: Define expected monthly/quarterly/annual growth %',
                    'ü§ñ Automated Monthly Monitoring: System auto-compares actual vs target growth',
                    '‚úÖ Auto-Satisfaction Alert: All GMs notified when performance meets target',
                    '‚ö†Ô∏è Auto-Task Creation: Tasks created when performance below target',
                    'üìÖ Periodic Review: Monthly + Quarterly + Annual automated cycles',
                    'ÔøΩ CEO Approval Required: Tasks remain open until CEO closes them'
                ],
                capabilities: {
                    'üéØ CEO Growth Target Setting': [
                        '<strong style="color: #D4AF37;">üéØ GCEO Defines Expected Growth Rates:</strong>',
                        '<strong>Example Target 2026:</strong> +18% annual growth in fee revenue',
                        '<strong>CEO Sets:</strong> Monthly target (+1.5%), Quarterly target (+4.5%), Annual target (+18%)',
                        '<strong>Applied to:</strong> Each business group (Retail & Corporate separately)',
                        '<strong>Baseline:</strong> Previous period actuals (2025 for 2026 comparison)',
                        '<strong>System Storage:</strong> Targets stored and used for automated monitoring',
                        '<strong>Flexibility:</strong> CEO can adjust targets mid-year if needed',
                        '<strong>Visibility:</strong> All GMs can view their assigned growth targets'
                    ],
                    'ü§ñ Automated Monthly Monitoring System': [
                        '<strong style="color: #D4AF37;">üìÖ MONTHLY AUTOMATED CYCLE:</strong>',
                        '<strong>Trigger:</strong> 1st day of each month (auto-runs at 8:00 AM)',
                        '<strong>Process:</strong> System compares actual revenue vs target for previous month',
                        '',
                        '<strong>‚úÖ IF PERFORMANCE MEETS/EXCEEDS TARGET:</strong>',
                        '‚Üí ‚úâÔ∏è <strong>Auto-email sent to ALL General Managers:</strong>',
                        '   "Subject: GCEO Satisfaction - [Month] Performance Achieved"',
                        '   Content: Performance summary, actual vs target, CEO satisfaction confirmed',
                        '‚Üí üìä Dashboard shows ‚úÖ Green indicator for that business group',
                        '‚Üí üéâ No tasks created - Performance satisfactory',
                        '',
                        '<strong>‚ö†Ô∏è IF PERFORMANCE BELOW TARGET:</strong>',
                        '‚Üí üö® <strong>System AUTO-CREATES TASK immediately:</strong>',
                        '   <strong>Task #1:</strong> Assigned to Business Group GM (Retail or Corporate)',
                        '   <strong>Task #2:</strong> Notification to GM Strategic Planning',
                        '   <strong>Task #3:</strong> Notification to GM Finance',
                        '‚Üí üìß Email alerts sent to all recipients instantly',
                        '‚Üí ‚è∞ Task Priority: HIGH (CEO escalation)',
                        '‚Üí üìä Dashboard shows ‚ö†Ô∏è Red indicator requiring attention'
                    ],
                    'üìã Task Details & Workflow': [
                        '<strong style="color: #D4AF37;">üìù AUTO-GENERATED TASK CONTENTS:</strong>',
                        '<strong>Task Title:</strong> "[Month/Quarter/Year] Revenue Below Target - Action Required"',
                        '<strong>Assigned To:</strong>',
                        '   ‚Ä¢ Primary: GM of underperforming business group',
                        '   ‚Ä¢ CC: GM Strategic Planning',
                        '   ‚Ä¢ CC: GM Finance',
                        '',
                        '<strong>Task Includes:</strong>',
                        '   üìä Actual revenue vs Target revenue',
                        '   üìâ Variance amount and percentage',
                        '   üìà Historical trend (last 3 months/quarters)',
                        '   üéØ Required actions to close gap',
                        '   üìÖ Previous period comparison',
                        '',
                        '<strong>Required Deliverables:</strong>',
                        '   1Ô∏è‚É£ Root cause analysis',
                        '   2Ô∏è‚É£ Action plan to close revenue gap',
                        '   3Ô∏è‚É£ Timeline for implementation',
                        '   4Ô∏è‚É£ Expected impact on next period',
                        '   5Ô∏è‚É£ Feedback submitted through system',
                        '',
                        '<strong>‚è∞ Due Date:</strong> 7 business days from task creation'
                    ],
                    'üîÑ Feedback & Closure Process': [
                        '<strong style="color: #D4AF37;">üìù GM SUBMITS FEEDBACK:</strong>',
                        '1Ô∏è‚É£ Business Group GM completes analysis and action plan',
                        '2Ô∏è‚É£ GM Strategic Planning reviews strategic alignment',
                        '3Ô∏è‚É£ GM Finance validates financial assumptions',
                        '4Ô∏è‚É£ All feedback entered into system task',
                        '',
                        '<strong style="color: #D4AF37;">üë• GM DELEGATION AUTHORITY:</strong>',
                        '‚Üí üìã <strong>GMs can delegate tasks to:</strong>',
                        '   ‚Ä¢ Assistant General Managers (AGM)',
                        '   ‚Ä¢ Executive Managers',
                        '   ‚Ä¢ Specialized team leads',
                        '‚Üí ÔøΩ <strong>Delegated tasks include:</strong>',
                        '   ‚Ä¢ Root cause analysis of revenue decline',
                        '   ‚Ä¢ Fee performance investigation',
                        '   ‚Ä¢ Collection rate analysis',
                        '   ‚Ä¢ Customer behavior review',
                        '   ‚Ä¢ Market trend assessment',
                        '‚Üí ‚úÖ <strong>GM remains accountable</strong> but can distribute workload',
                        '‚Üí üìä System tracks: Who performed analysis + GM final approval',
                        '‚Üí ÔøΩüîí <strong>Final submission must be approved by GM</strong> before sending to CEO',
                        '',
                        '<strong style="color: #D4AF37;">üîí CEO CLOSURE AUTHORITY - CRITICAL:</strong>',
                        '‚Üí ‚ö†Ô∏è <strong>AUTO-GENERATED TASKS CANNOT BE CLOSED BY ANYONE EXCEPT CEO</strong>',
                        '‚Üí üëë <strong>ONLY when CEO changes status to "Satisfied" ‚Üí Task automatically closes</strong>',
                        '‚Üí ÔøΩ <strong>Process Flow:</strong>',
                        '   1. System creates task (status: "Not Satisfied")',
                        '   2. GMs submit feedback and action plans',
                        '   3. CEO reviews all submissions',
                        '   4. CEO changes status from "Not Satisfied" ‚Üí "Satisfied"',
                        '   5. System automatically closes task when status = "Satisfied"',
                        '‚Üí üö´ <strong>No manual "Close" button for GMs</strong> - Only CEO can change satisfaction status',
                        '‚Üí üìß CEO receives notification when all feedback submitted',
                        '‚Üí üîç CEO reviews feedback and action plans in dashboard',
                        '‚Üí ‚úÖ <strong>CEO marks as "Satisfied"</strong> ‚Üí Task closed automatically',
                        '‚Üí ‚ùå <strong>CEO keeps as "Not Satisfied"</strong> ‚Üí Task remains open, CEO adds comments',
                        '‚Üí üìä System records: CEO decision, timestamp, satisfaction status change',
                        '',
                        '<strong>‚ôªÔ∏è IF CEO KEEPS STATUS "NOT SATISFIED":</strong>',
                        '‚Üí Task remains open with CEO feedback comments',
                        '‚Üí GMs notified to revise and resubmit',
                        '‚Üí Revised action plans added to same task',
                        '‚Üí Cycle repeats until CEO changes status to "Satisfied"',
                        '‚Üí üìà Task history shows all revision cycles'
                    ],
                    'üìÖ Periodic Review Cycles': [
                        '<strong style="color: #D4AF37;">üîÑ THREE AUTOMATED MONITORING CYCLES:</strong>',
                        '',
                        '<strong>1Ô∏è‚É£ MONTHLY CYCLE:</strong>',
                        '   ‚Ä¢ Runs: 1st of every month at 8:00 AM',
                        '   ‚Ä¢ Compares: Previous month actual vs monthly target',
                        '   ‚Ä¢ Example: Feb 1st checks January performance',
                        '   ‚Ä¢ Target: +1.5% month-over-month growth',
                        '',
                        '<strong>2Ô∏è‚É£ QUARTERLY CYCLE:</strong>',
                        '   ‚Ä¢ Runs: 1st day of Q2, Q3, Q4, and following Q1',
                        '   ‚Ä¢ Compares: Previous quarter actual vs quarterly target',
                        '   ‚Ä¢ Example: Apr 1st checks Q1 performance (Jan-Mar)',
                        '   ‚Ä¢ Target: +4.5% quarter-over-quarter growth',
                        '',
                        '<strong>3Ô∏è‚É£ ANNUAL CYCLE:</strong>',
                        '   ‚Ä¢ Runs: January 1st at 8:00 AM',
                        '   ‚Ä¢ Compares: Previous year total vs annual target',
                        '   ‚Ä¢ Example: Jan 1, 2027 checks full year 2026',
                        '   ‚Ä¢ Target: +18% year-over-year growth',
                        '',
                        '<strong>üìä Each Cycle:</strong>',
                        '   ‚úÖ Sends satisfaction emails if target met',
                        '   ‚ö†Ô∏è Creates tasks if target missed',
                        '   üìß Notifies all stakeholders automatically',
                        '   üîí Requires CEO approval to close tasks'
                    ],
                    'üìä Executive Summary - 2026 Performance': [
                        '<strong style="color: #D4AF37;">Total Fee Revenue 2026:</strong> QAR 24.8M',
                        '<strong>vs 2025:</strong> QAR 21.0M (+QAR 3.8M, +18% YoY)',
                        '<strong>Retail Banking:</strong> QAR 15.9M (64%) - Growth +15%',
                        '<strong>Corporate Banking:</strong> QAR 8.9M (36%) - Growth +23%',
                        '<strong>Target Threshold:</strong> 98% collection rate (On Track)',
                        '<strong>Strategic Insight:</strong> Corporate growing faster than Retail'
                    ],
                    'üè¶ Retail Banking Performance': [
                        '<strong>Total Revenue:</strong> QAR 15.9M (2026) vs QAR 13.8M (2025)',
                        '<strong>Growth Rate:</strong> +15% YoY (+QAR 2.1M)',
                        '<strong>Market Share:</strong> 64% of total fee revenue',
                        '<strong>Segments:</strong> Mass (45%), Private (35%), Tamayuz (20%)',
                        '<strong>Top Fee:</strong> Account Maintenance - QAR 4.2M',
                        '<strong>Collection Rate:</strong> 96% (Above target)',
                        '<strong>Customer Base:</strong> ~850K customers',
                        '‚úÖ <strong>Status:</strong> Ready for satisfaction assessment'
                    ],
                    'üè¢ Corporate Banking Performance': [
                        '<strong>Total Revenue:</strong> QAR 8.9M (2026) vs QAR 7.2M (2025)',
                        '<strong>Growth Rate:</strong> +23% YoY (+QAR 1.7M)',
                        '<strong>Market Share:</strong> 36% of total fee revenue',
                        '<strong>Categories:</strong> Trade Finance (40%), WPS (35%), Corporate Services (25%)',
                        '<strong>Top Fee:</strong> WPS Salary Transfer - QAR 12.1M',
                        '<strong>Collection Rate:</strong> 99% (Excellent)',
                        '<strong>Customer Base:</strong> ~3,200 corporate clients',
                        '‚úÖ <strong>Status:</strong> Ready for satisfaction assessment'
                    ],
                    'üìà Visual Performance Chart': [
                        'Interactive bar chart: 2025 vs 2026 comparison',
                        'Retail segment trend visualization',
                        'Corporate segment trend visualization',
                        'Total revenue growth indicator',
                        'Target threshold line overlay',
                        'Quick visual insights at-a-glance'
                    ],
                    '‚ö° Satisfaction Assessment Actions': [
                        '<strong style="color: #D4AF37;">üéØ AUTOMATED SATISFACTION SYSTEM:</strong>',
                        '',
                        '<strong>‚úÖ WHEN TARGET IS MET:</strong>',
                        '‚Üí System automatically sends satisfaction email to all GMs',
                        '‚Üí Email subject: "GCEO Satisfaction Confirmed - [Period] Performance"',
                        '‚Üí Email content: Congratulations message with performance data',
                        '‚Üí Recipients: All General Managers (Retail, Corporate, Finance, Risk, Compliance, Strategy)',
                        '‚Üí Dashboard shows green ‚úÖ satisfaction indicator',
                        '‚Üí No manual action required from CEO',
                        '',
                        '<strong>‚ö†Ô∏è WHEN TARGET IS MISSED:</strong>',
                        '‚Üí System automatically creates high-priority tasks',
                        '‚Üí Tasks assigned to underperforming business group GM',
                        '‚Üí Notifications sent to GM Strategic Planning',
                        '‚Üí Notifications sent to GM Finance',
                        '‚Üí Dashboard shows red ‚ö†Ô∏è warning indicator',
                        '‚Üí CEO can manually add additional comments or instructions',
                        '',
                        '<strong>üëë CEO CONTROLS:</strong>',
                        '‚Üí Set and adjust growth targets anytime',
                        '‚Üí View all automated alerts and tasks',
                        '‚Üí Add manual feedback to any auto-generated task',
                        '‚Üí Override automation if special circumstances exist',
                        '‚Üí Final approval authority - only CEO can close tasks'
                    ],
                    'üéØ Example Scenario - Monthly Cycle': [
                        '<strong style="color: #D4AF37;">üìÖ EXAMPLE: January 2026 Review (Feb 1st Auto-Run):</strong>',
                        '',
                        '<strong>CEO Target Set:</strong> +1.5% monthly growth',
                        '<strong>Retail Baseline (Dec 2025):</strong> QAR 1.25M',
                        '<strong>Retail Target (Jan 2026):</strong> QAR 1.27M (+1.5%)',
                        '<strong>Retail Actual (Jan 2026):</strong> QAR 1.29M',
                        '',
                        '<strong>‚úÖ RETAIL RESULT:</strong> Exceeded target by QAR 20K (+1.9%)',
                        '<strong>System Action:</strong>',
                        '   ‚Üí üìß Auto-email sent to all GMs: "Retail Banking exceeded January target"',
                        '   ‚Üí ‚úÖ Dashboard shows green indicator',
                        '   ‚Üí üéâ No tasks created',
                        '',
                        '<strong>---</strong>',
                        '',
                        '<strong>Corporate Baseline (Dec 2025):</strong> QAR 720K',
                        '<strong>Corporate Target (Jan 2026):</strong> QAR 731K (+1.5%)',
                        '<strong>Corporate Actual (Jan 2026):</strong> QAR 710K',
                        '',
                        '<strong>‚ö†Ô∏è CORPORATE RESULT:</strong> Missed target by QAR 21K (-1.4%)',
                        '<strong>System Action:</strong>',
                        '   ‚Üí üö® Task #1 created for GM Corporate Banking (Mr. T.F)',
                        '   ‚Üí üìß Task #2 notification to GM Strategic Planning',
                        '   ‚Üí üìß Task #3 notification to GM Finance',
                        '   ‚Üí ‚ö†Ô∏è Dashboard shows red indicator',
                        '   ‚Üí ‚è∞ Due date: 7 business days (Feb 10th)',
                        '   ‚Üí üîí Tasks remain open until CEO approves closure'
                    ],
                    'üèÜ Governance Principles': [
                        '<strong>Single Golden Reference:</strong> Approved fee definitions and published customer tariffs are the ONLY source of truth',
                        'GL / PL postings are validated AGAINST approved tariffs',
                        'Reconciliation compares financial records to governance-approved fees',
                        'Exception detection based on deviation from published tariffs',
                        'Audit trail for all fee approvals and publications',
                        'CEO has final authority on satisfaction status'
                    ],
                    'üì§ Data Upload System - Interim Solution': [
                        '<strong style="color: #D4AF37;">üìä MANUAL DATA UPLOAD WORKFLOW:</strong>',
                        '<strong>Purpose:</strong> Interim solution until system integration with GL/Core Banking',
                        '',
                        '<strong>üë• Each Business Group Uploads Monthly:</strong>',
                        '‚Üí üè¶ <strong>GM Retail Banking:</strong> Uploads retail fee revenue data',
                        '   ‚Ä¢ File format: Excel template (standardized)',
                        '   ‚Ä¢ Data includes: Fee type, Amount collected, Customer segment',
                        '   ‚Ä¢ Upload deadline: 3rd business day of each month',
                        '   ‚Ä¢ Status: "Pending Finance Approval"',
                        '',
                        '‚Üí üè¢ <strong>GM Corporate Banking:</strong> Uploads corporate fee revenue data',
                        '   ‚Ä¢ File format: Excel template (standardized)',
                        '   ‚Ä¢ Data includes: Fee type, Amount collected, Corporate category',
                        '   ‚Ä¢ Upload deadline: 3rd business day of each month',
                        '   ‚Ä¢ Status: "Pending Finance Approval"',
                        '',
                        '<strong>üí∞ GM Finance - Mandatory Approval:</strong>',
                        '‚Üí üîç <strong>Finance reviews EACH business group submission</strong>',
                        '‚Üí ‚úÖ <strong>Finance validates against GL records</strong>',
                        '‚Üí üìä <strong>Finance compares with expected revenue</strong>',
                        '‚Üí ‚ö†Ô∏è <strong>Finance can REJECT if discrepancies found</strong>',
                        '‚Üí üîí <strong>Data NOT visible to system until Finance approves</strong>',
                        '',
                        '<strong>‚úÖ Finance Approval Process:</strong>',
                        '1Ô∏è‚É£ Finance receives upload notification',
                        '2Ô∏è‚É£ Finance downloads and reviews submission',
                        '3Ô∏è‚É£ Finance validates against GL/PL records',
                        '4Ô∏è‚É£ Finance either: APPROVES ‚úÖ or REJECTS ‚ùå with comments',
                        '5Ô∏è‚É£ If approved ‚Üí Data loaded into system',
                        '6Ô∏è‚É£ If rejected ‚Üí Business group resubmits corrected data',
                        '',
                        '<strong>üîÑ Workflow States:</strong>',
                        '‚Üí "Uploaded" ‚Üí Business group submitted',
                        '‚Üí "Under Finance Review" ‚Üí Finance reviewing',
                        '‚Üí "Approved by Finance" ‚Üí Data loaded into system',
                        '‚Üí "Rejected by Finance" ‚Üí Needs correction and resubmission',
                        '‚Üí "System Active" ‚Üí CEO monitoring begins'
                    ],
                    'üîå Future System Integration': [
                        '<strong style="color: #D4AF37;">üöÄ PLANNED SYSTEM ENHANCEMENTS:</strong>',
                        '<strong>Phase 1 (Current):</strong> Manual upload with Finance approval',
                        '<strong>Phase 2 (Planned):</strong> Direct GL system integration',
                        '<strong>Phase 3 (Planned):</strong> Real-time core banking API connection',
                        '',
                        '<strong>Until Full Integration:</strong>',
                        '‚Üí Manual upload remains the data source',
                        '‚Üí Finance approval ensures data accuracy',
                        '‚Üí System automation works on approved data',
                        '‚Üí CEO monitoring based on Finance-validated figures',
                        '‚Üí All governance rules apply to uploaded data',
                        '',
                        '<strong>Benefits of Finance Approval Gate:</strong>',
                        '‚úÖ Ensures data accuracy before CEO review',
                        '‚úÖ Prevents incorrect figures from triggering false alerts',
                        '‚úÖ Finance maintains control over financial data quality',
                        '‚úÖ Audit trail of all data submissions and approvals',
                        '‚úÖ Business groups accountable for data accuracy'
                    ],
                    'üîç Deep Dive Access': [
                        'Click Retail card ‚Üí Access GM Retail Banking full dashboard',
                        'Click Corporate card ‚Üí Access GM Corporate Banking full dashboard',
                        'View detailed fee breakdowns by segment',
                        'Access customer satisfaction metrics',
                        'Review exemptions and exceptions',
                        'Export detailed reports (PDF/Excel)',
                        'Monitor real-time collection rates'
                    ],
                    'üìä System Intelligence': [
                        'Real-time data refresh every 15 minutes',
                        'Automated anomaly detection',
                        'Predictive revenue forecasting',
                        'Risk indicators and alerts',
                        'Compliance status monitoring',
                        'Executive KPI dashboard',
                        'Mobile-friendly responsive design'
                    ]
                },
                actions: ['View Performance Chart', 'Assess Satisfaction Status', 'Generate Executive Report', 'Access Business Group Details']
            },
            finance: {
                title: 'üí∞ GM Finance Dashboard',
                name: 'Khalid Al-Mannai',
                data: [
                    { value: 'QAR 2.5M', label: 'Expected Revenue' },
                    { value: '87%', label: 'Collection Rate' },
                    { value: 'QAR 325K', label: 'Revenue Gap' },
                    { value: '46', label: 'Active Fees' },
                    { value: 'Q4 vs Q3', label: 'Quarterly: +QAR 185K' },
                    { value: '2026 vs 2025', label: 'Annual: +QAR 420K' }
                ],
                features: [
                    'üèõÔ∏è Financial Reconciliation: Service-based Expected vs Actual (GL) comparison',
                    'Golden Reference Validation: GL/PL validated against approved tariffs',
                    'Revenue analysis by segment (Retail vs Corporate)',
                    'Collection rates by category (Transfers, Cards, Trade, etc.)',
                    'Gap analysis with exemptions impact breakdown',
                    'Top 10 revenue-generating fees',
                    'Fees with lowest collection rates',
                    'Quarter-over-Quarter revenue comparison',
                    'Year-over-Year financial trends',
                    'Period filtering (Monthly/Quarterly/Annual)'
                ],
                capabilities: {
                    'üèõÔ∏è Financial Reconciliation (READ-ONLY)': [
                        '‚≠ê Golden Reference: Approved fee definitions and published tariffs are the single source of truth',
                        '‚úÖ GL / PL entries are validated against approved fees (not the other way)',
                        'Service-based reconciliation view: Expected vs Actual (GL)',
                        'Variance detection: Match / Shortfall / Excess / Review',
                        'WPS Salary File: QAR 12.13M (Expected) vs QAR 12.13M (GL) = ‚úÖ Match',
                        'Period comparison: Monthly / Quarterly / Annual reconciliation',
                        'üìä Audit-ready visibility for CFO / Finance / Compliance review'
                    ],
                    'Revenue Analysis': [
                        'Expected vs Realized revenue comparison',
                        'Revenue breakdown by segment (Retail/Corporate)',
                        'Revenue trends and forecasting',
                        'Top 10 revenue-generating fees',
                        'Revenue by fee category',
                        'Month-over-month growth analysis'
                    ],
                    'Quarterly Comparison (Q vs Q)': [
                        'Q4 vs Q3 2026: +QAR 185K revenue increase',
                        'Quarterly collection rate trends (83% ‚Üí 87%)',
                        'Quarter-by-quarter gap analysis',
                        'Seasonal revenue patterns',
                        'Q1-Q4 performance dashboard',
                        'Quarterly budget vs actual'
                    ],
                    'Annual Comparison (Y vs Y)': [
                        '2026 vs 2025: +QAR 420K total growth',
                        'Year-over-year collection improvement (+5%)',
                        'Annual revenue benchmarking',
                        'Multi-year trend analysis',
                        'Long-term profitability tracking',
                        'Annual financial KPIs'
                    ],
                    'Collection Monitoring': [
                        'Overall collection rate: 87%',
                        'Collection rates by category',
                        'Collected vs Accrued analysis',
                        'Fees with lowest collection rates',
                        'Collection trends and patterns',
                        'Customer payment behavior'
                    ],
                    'Gap Analysis': [
                        'Total revenue gap: QAR 325K',
                        'Exemptions impact on revenue',
                        'Collection gaps by segment',
                        'Uncollected fee analysis',
                        'Recovery opportunities',
                        'Gap closure strategies'
                    ],
                    'Fee Performance': [
                        '46+ active fees tracked',
                        'Import LC: QAR 35,250 expected',
                        'Standby LC: QAR 28,750 expected',
                        'Letter of Guarantee: QAR 26,500',
                        'Corporate Card: QAR 12,500',
                        'Performance vs targets'
                    ],
                    'Financial Reports': [
                        'Revenue summary reports',
                        'Collection performance reports',
                        'Segment analysis reports',
                        'Fee profitability analysis',
                        'Budget vs actual reports',
                        'PDF/Excel export'
                    ],
                    'Filters & Views': [
                        'Period: Monthly/Quarterly/Annual',
                        'Segment: All/Retail/Corporate',
                        'Category filtering',
                        'Custom date ranges',
                        'Comparative analysis'
                    ]
                },
                actions: ['Download Financial Report', 'Analyze Collection Gaps', 'View Fee Details', 'Export to Excel']
            },
            risk: {
                title: '‚ö†Ô∏è GM Risk Dashboard',
                name: 'Sara Al-Mohannadi',
                data: [
                    { value: '12', label: 'Critical Risks' },
                    { value: '8', label: 'Below Threshold' },
                    { value: '85%', label: 'Worst Matching' },
                    { value: 'QAR 450K', label: 'Risk Exposure' }
                ],
                features: [
                    'Fees with worst matching ratios (sorted by risk)',
                    'Exception pattern detection (Critical/High/Medium/Low)',
                    'Threshold exceptions detail with trends',
                    'Risk trend indicators (Improving/Declining/Stable)',
                    'Financial impact quantification',
                    'Actionable recommendations per risk'
                ],
                capabilities: {
                    'Risk Identification': [
                        '12 fees flagged as critical risk',
                        'Fees below 98% threshold',
                        'Worst matching ratios analysis',
                        'Exception pattern detection',
                        'Risk scoring and classification',
                        'Early warning indicators'
                    ],
                    'Risk Assessment': [
                        'Critical: Fees below 85% matching',
                        'High Risk: 85-90% matching',
                        'Medium Risk: 90-95% matching',
                        'Low Risk: 95-98% matching',
                        'Risk exposure: QAR 450K',
                        'Impact on satisfaction status'
                    ],
                    'Exception Monitoring': [
                        'Track 8 fees below threshold',
                        'Exception frequency analysis',
                        'Pattern identification',
                        'Root cause analysis',
                        'Recurring vs one-time exceptions',
                        'Exception resolution tracking'
                    ],
                    'Risk Trends': [
                        'Improving: 3 fees',
                        'Declining: 5 fees',
                        'Stable: 4 fees',
                        'Trend analysis over time',
                        'Predictive risk indicators',
                        'Seasonal patterns'
                    ],
                    'Mitigation Actions': [
                        'Actionable recommendations',
                        'Risk mitigation strategies',
                        'Escalation procedures',
                        'Corrective action tracking',
                        'Risk acceptance decisions',
                        'Mitigation effectiveness'
                    ],
                    'Risk Reports': [
                        'Risk summary dashboard',
                        'Detailed risk assessments',
                        'Exception reports',
                        'Risk trend reports',
                        'Mitigation progress',
                        'Executive risk briefings'
                    ]
                },
                actions: ['Review Risk Items', 'Generate Risk Report', 'Set Risk Alerts', 'Escalate Issues']
            },
            compliance: {
                title: '‚úÖ GM Compliance Dashboard',
                name: 'Omar Al-Malki',
                data: [
                    { value: '94%', label: 'Policy Compliance' },
                    { value: '22', label: 'Exemptions' },
                    { value: '100%', label: 'Regulatory Met' },
                    { value: '1,247', label: 'Audit Logs' }
                ],
                features: [
                    'Four-tab navigation (Policy/Exemptions/Regulatory/Audit)',
                    'Policy compliance tracking by area',
                    'Exemptions audit with justifications',
                    'Regulatory metrics and submission tracking',
                    'Complete audit trail with timestamps',
                    'Compliance status classification'
                ],
                capabilities: {
                    'Policy Compliance': [
                        'Overall compliance: 94%',
                        'Fee policy adherence tracking',
                        'Exception policy compliance',
                        'Threshold policy monitoring',
                        'Approval workflow compliance',
                        'Policy violation alerts'
                    ],
                    'Exemptions Management': [
                        '22 active exemptions',
                        'Sector exemptions: 20 customers',
                        'Permanent exemptions: 1 customer',
                        'Temporary exemptions: 1 customer',
                        'Exemption justification review',
                        'Exemption expiry tracking'
                    ],
                    'Regulatory Compliance': [
                        '100% regulatory requirements met',
                        'Central Bank reporting',
                        'Tariff disclosure compliance',
                        'Customer notification requirements',
                        'Regulatory submission tracking',
                        'Compliance deadline monitoring'
                    ],
                    'Audit Trail': [
                        '1,247 audit log entries',
                        'All actions tracked with timestamps',
                        'User activity monitoring',
                        'Change history tracking',
                        'Access logs',
                        'Compliance audit reports'
                    ],
                    'Compliance Reviews': [
                        'Exemption justification audits',
                        'Threshold compliance reviews',
                        'Policy adherence checks',
                        'Regulatory submission reviews',
                        'Internal control assessments',
                        'External audit preparation'
                    ],
                    'Compliance Reports': [
                        'Compliance status reports',
                        'Exemption audit reports',
                        'Regulatory submission reports',
                        'Audit trail summaries',
                        'Non-compliance reports',
                        'Remediation tracking'
                    ]
                },
                actions: ['Audit Exemptions', 'Compliance Report', 'Review Audit Trail', 'Generate Certification']
            },
            retail: {
                title: 'üè¶ GM Retail Banking Dashboard',
                name: 'Ahmed Al-Kuwari',
                data: [
                    { value: 'QAR 1.2M', label: 'Retail Revenue' },
                    { value: '3', label: 'Segments (M/P/T)' },
                    { value: '100', label: 'Active Customers' },
                    { value: '23', label: 'Retail Fees' },
                    { value: 'Q4 vs Q3', label: 'Quarterly: +8%' },
                    { value: '2026 vs 2025', label: 'Annual: +15%' }
                ],
                features: [
                    'Segment analysis (Mass/Private/Tamayuz)',
                    'Fee performance by retail segment',
                    'Customer satisfaction rates',
                    'Retail-specific exemptions',
                    'Quarter-over-Quarter segment comparison',
                    'Year-over-Year retail growth tracking',
                    'Segment comparison analytics',
                    'Retail banking reports'
                ],
                capabilities: {
                    'Mass Banking (11 Fees)': [
                        'Local Transfers (3-tier: QAR 0.60, 4.00, 6.00)',
                        'Internal Transfer: QAR 0.50',
                        'FX Markup USD/GCC: 2.0%',
                        'FX Markup GBP/EUR: 2.5%',
                        'ATM International: QAR 10',
                        'Paper Statement: QAR 25',
                        'Checkbook (25 leaves): QAR 50',
                        'Debit Card Annual: QAR 100',
                        'Credit Card Annual: QAR 300',
                        'SMS Alerts: QAR 10/month',
                        'SWIFT Outgoing: QAR 75'
                    ],
                    'Private Banking (5 Fees)': [
                        'Local Transfers (preferential rates)',
                        'SWIFT Outgoing: QAR 50',
                        'Platinum Debit Card: FREE',
                        'Platinum Credit Card: QAR 200',
                        'Checkbook: FREE',
                        'Enhanced service levels',
                        'Relationship-based pricing'
                    ],
                    'Tamayuz VIP (4 Fees)': [
                        'Local Transfer: FREE',
                        'SWIFT Outgoing: FREE',
                        'Visa Infinite Card: FREE',
                        'Relationship Package: QAR 1,000',
                        'Most fees waived',
                        'Premium banking experience'
                    ],
                    'Quarterly Comparison (Q vs Q)': [
                        'Q4 vs Q3 2026: +8% retail revenue growth',
                        'Mass segment: +QAR 45K quarterly increase',
                        'Private segment: +QAR 30K quarterly growth',
                        'Tamayuz: +2 new VIP customers',
                        'Quarterly customer acquisition trends',
                        'Q1-Q4 segment performance comparison'
                    ],
                    'Annual Comparison (Y vs Y)': [
                        '2026 vs 2025: +15% annual retail growth',
                        'Mass segment: +12 customers YoY',
                        'Private segment: +5 customers YoY',
                        'Year-over-year fee utilization improvement',
                        'Annual customer satisfaction trends',
                        'Multi-year segment evolution'
                    ],
                    'Segment Performance': [
                        'Mass: 75 customers, QAR 650K revenue',
                        'Private: 20 customers, QAR 450K revenue',
                        'Tamayuz: 5 customers, QAR 100K revenue',
                        'Cross-segment comparison',
                        'Customer migration tracking',
                        'Segment profitability'
                    ],
                    'Retail Analytics': [
                        'Customer satisfaction by segment',
                        'Fee utilization rates',
                        'Revenue per customer',
                        'Product penetration',
                        'Service quality metrics',
                        'Customer retention'
                    ],
                    'Retail Reports': [
                        'Segment performance reports',
                        'Customer analytics',
                        'Fee utilization reports',
                        'Revenue analysis',
                        'Satisfaction tracking',
                        'Competitive analysis'
                    ]
                },
                actions: ['Segment Analysis', 'Customer Report', 'Fee Performance', 'View Comparisons']
            },
            corporate: {
                title: 'üè¢ GM Corporate Banking Dashboard',
                name: 'Fatima Al-Thani',
                data: [
                    { value: 'QAR 13.4M', label: 'Corporate Revenue' },
                    { value: '4', label: 'Categories (T/S/W/FX)' },
                    { value: '50', label: 'Corporate Clients' },
                    { value: '24', label: 'Corporate Fees' },
                    { value: 'Q4 vs Q3', label: 'Quarterly: +10%' },
                    { value: '2025 vs 2024', label: 'WPS YoY: +0.5%' }
                ],
                features: [
                    'Category breakdown (Trade/Services/WPS/FX)',
                    'Trade finance fee tracking',
                    'Corporate services analysis',
                    'WPS Salary Transfer Fees tracking with 6-year history',
                    'FX operations monitoring',
                    'Quarter-over-Quarter trade analysis',
                    'Year-over-Year corporate growth',
                    'Corporate-specific exemptions',
                    'Enterprise banking reports'
                ],
                capabilities: {
                    'Trade Finance (8 Fees)': [
                        'Import LC Opening: 0.5% + 0.125%/month (min QAR 500)',
                        'Standby LC: 0.20%/month (min QAR 750)',
                        'Letter of Guarantee: 0.20%/month (min QAR 500)',
                        'Export LC Advising: 0.125% (min QAR 250)',
                        'LC Amendment: QAR 200',
                        'Bill Discounting: 0.25%',
                        'Shipping Guarantee: QAR 500',
                        'Documentary Collection: 0.15% (min QAR 150)'
                    ],
                    'Corporate Services (5 Fees)': [
                        'Cash Management Platform: QAR 500/month',
                        'Payroll Processing: QAR 2/transaction',
                        'Corporate Card Annual: QAR 250',
                        'Account Analysis Report: QAR 100',
                        'Treasury Advisory: QAR 1,000',
                        'Dedicated relationship manager',
                        'Customized reporting'
                    ],
                    'WPS Services - Salary Transfer Fees (NEW)': [
                        '<strong>Fee Name:</strong> WPS ‚Äì Salary File Processing Fee',
                        '<strong>Category:</strong> Corporate Fees ‚Üí WPS Services',
                        '<strong>Posting Account:</strong> PL52018',
                        '<strong>Charge Basis:</strong> Per salary file (monthly aggregation)',
                        '<strong>Currency:</strong> QAR only',
                        '<strong>Status:</strong> Active (2025 COMPLETED)',
                        '<strong>2025 Total Revenue:</strong> QAR 12,127,750'
                    ],
                    'WPS Historical Performance (6-Year Data)': [
                        '<strong>2020:</strong> QAR 5,134,650 (Baseline)',
                        '<strong>2021:</strong> QAR 5,878,300 (+14.5% YoY)',
                        '<strong>2022:</strong> QAR 8,725,600 (+48.4% YoY) üöÄ',
                        '<strong>2023:</strong> QAR 11,153,800 (+27.8% YoY)',
                        '<strong>2024:</strong> QAR 12,067,500 (+8.2% YoY)',
                        '<strong>2025:</strong> QAR 12,127,750 (+0.5% YoY) ‚úÖ COMPLETED',
                        '<strong>6-Year Growth:</strong> +136% (2020-2025)'
                    ],
                    'WPS 2025 Monthly Breakdown': [
                        'January: QAR 998,850',
                        'February: QAR 949,450',
                        'March: QAR 1,138,250 (Peak)',
                        'April: QAR 870,650',
                        'May: QAR 1,084,600',
                        'June: QAR 909,000',
                        'July: QAR 1,069,850',
                        'August: QAR 979,650',
                        'September: QAR 996,750',
                        'October: QAR 1,059,900',
                        'November: QAR 958,950',
                        'December: QAR 1,111,850',
                        '<strong>Average Monthly:</strong> QAR 1,010,646'
                    ],
                    'Quarterly Comparison (Q vs Q)': [
                        'Q4 vs Q3 2026: +10% corporate revenue',
                        'Trade Finance: +QAR 75K quarterly growth',
                        'Corporate Services: +QAR 35K increase',
                        'WPS Services stable: ~QAR 1M/month',
                        'FX Operations: +QAR 20K quarterly',
                        'New corporate clients: +3 this quarter',
                        'Q1-Q4 trade finance volume trends'
                    ],
                    'Annual Comparison (Y vs Y)': [
                        '2025 vs 2024: +22% total corporate growth',
                        'WPS Fees 2025 vs 2024: +0.5% (+QAR 60K)',
                        'Trade finance volume: +QAR 285K YoY',
                        'Corporate clients: +8 new accounts',
                        'Year-over-year LC transaction growth (+18%)',
                        'WPS market share: Stable & mature',
                        'Multi-year corporate banking expansion'
                    ],
                    'FX Services (3 Fees)': [
                        'FX Transaction: 0.10% (min QAR 50)',
                        'FX Forward Contract: QAR 200',
                        'Currency Swap: 0.15% (min QAR 300)',
                        'Real-time FX rates',
                        'Hedging solutions',
                        'Multi-currency accounts'
                    ],
                    'Category Performance': [
                        'Trade Finance: QAR 750K (58% of revenue)',
                        'Corporate Services: QAR 350K (27%)',
                        'FX Services: QAR 200K (15%)',
                        'Category trends',
                        'Cross-sell opportunities',
                        'Relationship profitability'
                    ],
                    'Corporate Analytics': [
                        'Customer size segmentation',
                        'Product penetration rates',
                        'Wallet share analysis',
                        'Relationship depth',
                        'Service utilization',
                        'Customer lifetime value'
                    ],
                    'Corporate Reports': [
                        'Category performance reports',
                        'Customer relationship reports',
                        'Product utilization reports',
                        'Revenue analysis',
                        'Cross-sell opportunities',
                        'Risk assessment reports'
                    ]
                },
                actions: ['Category Analysis', 'Trade Report', 'Corporate Overview', 'Client Review']
            }
        };

        function showRoleDemo(role) {
            const demo = roleDemos[role];
            const modal = document.getElementById('roleModal');
            const content = document.getElementById('modalContent');
            
            // Build capabilities HTML
            let capabilitiesHtml = '';
            for (const [category, items] of Object.entries(demo.capabilities)) {
                capabilitiesHtml += `
                    <div class="capability-section">
                        <h5>${category}</h5>
                        <ul class="capability-list">
                            ${items.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0;">${demo.title}</h2>
                    <button onclick="toggleFullscreen()" class="fullscreen-btn" title="Fullscreen / Exit Fullscreen">
                        <span class="fullscreen-icon">‚õ∂</span>
                        <span class="fullscreen-text">Fullscreen</span>
                    </button>
                </div>
                <p style="font-size: 18px; color: var(--text-gray); margin-bottom: 24px;">Logged in as: <strong style="color: var(--gold);">${demo.name}</strong></p>
                
                <!-- Governance Principle Banner -->
                <div style="padding: 16px; background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(30, 58, 138, 0.05)); border-radius: 12px; border-left: 4px solid var(--gold); margin-bottom: 24px;">
                    <div style="display: flex; align-items: start; gap: 12px;">
                        <div style="font-size: 20px; line-height: 1;">üèÜ</div>
                        <div>
                            <div style="color: var(--gold); font-weight: bold; font-size: 14px; margin-bottom: 6px;">Governance Principle: Single Golden Reference</div>
                            <div style="font-size: 13px; color: var(--text-dark); line-height: 1.5;">
                                <strong>Approved fee definitions and published customer tariffs are the single golden reference.</strong> All GL / PL postings must be reconciled and validated against these approved and published fees.
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-preview">
                    <div class="preview-section">
                        <h4>üìä Key Metrics</h4>
                        <div class="preview-grid">
                            ${demo.data.map(item => `
                                <div class="preview-item">
                                    <div class="preview-value">${item.value}</div>
                                    <div class="preview-label">${item.label}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="preview-section">
                        <h4>‚ú® Key Features</h4>
                        <ul style="list-style: none; padding: 0;">
                            ${demo.features.map(feature => `
                                <li style="padding: 8px 0; padding-left: 24px; position: relative;">
                                    <span style="position: absolute; left: 0; color: var(--gold); font-weight: bold;">‚úì</span>
                                    ${feature}
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
                
                ${role === 'finance' ? `
                <!-- Financial Reconciliation View (READ-ONLY) -->
                <div style="margin: 24px 0; padding: 20px; background: linear-gradient(135deg, rgba(30, 58, 138, 0.03), rgba(212, 175, 55, 0.03)); border-radius: 16px; border: 2px solid var(--gold);">
                    <h4 style="color: var(--primary-blue); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                        üèõÔ∏è Financial Reconciliation - Service vs GL/PL (Read-Only View)
                    </h4>
                    <div style="font-size: 12px; color: var(--text-gray); margin-bottom: 16px; padding: 12px; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                        <strong>‚≠ê Golden Reference Principle:</strong> Approved fee definitions and published tariffs are the source of truth. GL/PL entries below are validated against them.
                    </div>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                            <thead>
                                <tr style="background: var(--primary-blue); color: white;">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Service / Fee Name</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Fee Code</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">GL / PL Account</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd;">Expected (QAR)</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd;">Actual GL (QAR)</th>
                                    <th style="padding: 12px; text-align: right; border: 1px solid #ddd;">Variance</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">Status</th>
                                </tr>
                            </thead>
                            <tbody style="background: white;">
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;">WPS Salary File Processing</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">FEE-WPS-001</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">PL52018</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-weight: bold;">12,127,750</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">12,127,750</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: green; font-weight: bold;">0</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">‚úÖ Match</td>
                                </tr>
                                <tr style="background: #f9f9f9;">
                                    <td style="padding: 10px; border: 1px solid #ddd;">Import LC Processing</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">FEE-LC-IMP</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">PL52015</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-weight: bold;">4,856,250</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">4,856,250</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: green; font-weight: bold;">0</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">‚úÖ Match</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Standby LC</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">FEE-LC-STB</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">PL52016</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-weight: bold;">3,968,750</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">3,968,750</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: green; font-weight: bold;">0</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">‚úÖ Match</td>
                                </tr>
                                <tr style="background: #f9f9f9;">
                                    <td style="padding: 10px; border: 1px solid #ddd;">Letter of Guarantee</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">FEE-LG-001</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">PL52017</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-weight: bold;">3,657,500</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">3,657,500</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: green; font-weight: bold;">0</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">‚úÖ Match</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;">Corporate Card Annual</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">FEE-CRD-CRP</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;">PL52020</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-weight: bold;">1,725,000</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">1,725,000</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; color: green; font-weight: bold;">0</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">‚úÖ Match</td>
                                </tr>
                                <tr style="background: #fff9e6;">
                                    <td colspan="7" style="padding: 12px; text-align: center; font-size: 12px; color: var(--text-gray); border: 1px solid #ddd;">
                                        <strong>Note:</strong> This is a display-only reconciliation view. Expected amounts are based on approved fee definitions. 
                                        All values shown represent successful reconciliation between approved tariffs and GL/PL postings.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style="margin-top: 16px; padding: 12px; background: rgba(30, 58, 138, 0.05); border-radius: 8px; font-size: 12px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div>
                                <strong style="color: var(--primary-blue);">Status Legend:</strong>
                                <div style="margin-top: 4px; line-height: 1.6;">
                                    ‚úÖ Match - GL matches approved tariff<br>
                                    ‚ö†Ô∏è Shortfall - GL below expected<br>
                                    üìä Excess - GL above expected<br>
                                    üîç Review - Requires investigation
                                </div>
                            </div>
                            <div>
                                <strong style="color: var(--primary-blue);">Reconciliation Scope:</strong>
                                <div style="margin-top: 4px; line-height: 1.6;">
                                    Period: 2025 Full Year<br>
                                    Total Services: 5 Corporate Services<br>
                                    Match Rate: 100%<br>
                                    Last Updated: Jan 2026
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- WPS Revenue Chart Example -->
                <div style="margin: 24px 0; padding: 20px; background: white; border-radius: 16px; box-shadow: var(--shadow);">
                    <h4 style="color: var(--primary-blue); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                        üìä WPS Salary Transfer Fees - 6-Year Trend (2020-2025)
                    </h4>
                    <div style="position: relative; height: 300px; padding: 20px;">
                        <svg width="100%" height="100%" viewBox="0 0 800 280" style="overflow: visible;">
                            <!-- Grid Lines -->
                            <line x1="60" y1="20" x2="60" y2="240" stroke="#E2E8F0" stroke-width="2"/>
                            <line x1="60" y1="240" x2="760" y2="240" stroke="#E2E8F0" stroke-width="2"/>
                            
                            <!-- Y-axis labels -->
                            <text x="50" y="25" text-anchor="end" font-size="11" fill="#64748B">12M</text>
                            <text x="50" y="95" text-anchor="end" font-size="11" fill="#64748B">9M</text>
                            <text x="50" y="165" text-anchor="end" font-size="11" fill="#64748B">6M</text>
                            <text x="50" y="235" text-anchor="end" font-size="11" fill="#64748B">3M</text>
                            
                            <!-- Grid horizontal lines -->
                            <line x1="60" y1="90" x2="760" y2="90" stroke="#F1F5F9" stroke-width="1" stroke-dasharray="5,5"/>
                            <line x1="60" y1="160" x2="760" y2="160" stroke="#F1F5F9" stroke-width="1" stroke-dasharray="5,5"/>
                            
                            <!-- Data Points & Line -->
                            <!-- 2020: 5.13M, 2021: 5.88M, 2022: 8.73M, 2023: 11.15M, 2024: 12.07M, 2025: 12.13M -->
                            <!-- Scale: 12M = y20, 0M = y240 -->
                            <polyline points="90,175 210,157 330,83 450,35 570,24 690,23" 
                                      fill="none" stroke="#D4AF37" stroke-width="3"/>
                            
                            <!-- Data points circles -->
                            <circle cx="90" cy="175" r="5" fill="#1E3A8A" stroke="#D4AF37" stroke-width="2"/>
                            <circle cx="210" cy="157" r="5" fill="#1E3A8A" stroke="#D4AF37" stroke-width="2"/>
                            <circle cx="330" cy="83" r="5" fill="#1E3A8A" stroke="#D4AF37" stroke-width="2"/>
                            <circle cx="450" cy="35" r="5" fill="#1E3A8A" stroke="#D4AF37" stroke-width="2"/>
                            <circle cx="570" cy="24" r="5" fill="#1E3A8A" stroke="#D4AF37" stroke-width="2"/>
                            <circle cx="690" cy="23" r="6" fill="#D4AF37" stroke="#1E3A8A" stroke-width="2"/>
                            
                            <!-- X-axis labels -->
                            <text x="90" y="260" text-anchor="middle" font-size="12" font-weight="600" fill="#1E3A8A">2020</text>
                            <text x="210" y="260" text-anchor="middle" font-size="12" font-weight="600" fill="#1E3A8A">2021</text>
                            <text x="330" y="260" text-anchor="middle" font-size="12" font-weight="600" fill="#1E3A8A">2022</text>
                            <text x="450" y="260" text-anchor="middle" font-size="12" font-weight="600" fill="#1E3A8A">2023</text>
                            <text x="570" y="260" text-anchor="middle" font-size="12" font-weight="600" fill="#1E3A8A">2024</text>
                            <text x="690" y="260" text-anchor="middle" font-size="12" font-weight="600" fill="#D4AF37">2025</text>
                            
                            <!-- Value labels above points -->
                            <text x="90" y="165" text-anchor="middle" font-size="10" font-weight="600" fill="#1E3A8A">5.13M</text>
                            <text x="210" y="147" text-anchor="middle" font-size="10" font-weight="600" fill="#1E3A8A">5.88M</text>
                            <text x="330" y="73" text-anchor="middle" font-size="10" font-weight="600" fill="#1E3A8A">8.73M</text>
                            <text x="450" y="25" text-anchor="middle" font-size="10" font-weight="600" fill="#1E3A8A">11.15M</text>
                            <text x="570" y="14" text-anchor="middle" font-size="10" font-weight="600" fill="#1E3A8A">12.07M</text>
                            <text x="690" y="13" text-anchor="middle" font-size="11" font-weight="700" fill="#D4AF37">12.13M ‚úì</text>
                        </svg>
                    </div>
                    <div style="margin-top: 16px; padding: 12px; background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(30, 58, 138, 0.05)); border-radius: 8px; font-size: 12px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px;">
                            <div>
                                <strong style="color: var(--gold);">üìà Growth Rate:</strong>
                                <div style="margin-top: 4px; line-height: 1.6; color: var(--text-dark);">
                                    6-Year Total: <strong>+136%</strong><br>
                                    CAGR: <strong>+18.7%</strong> annually<br>
                                    2025 YoY: <strong>+0.5%</strong> (Mature)
                                </div>
                            </div>
                            <div>
                                <strong style="color: var(--gold);">üéØ Key Insight:</strong>
                                <div style="margin-top: 4px; line-height: 1.6; color: var(--text-dark);">
                                    Massive growth in 2022 (+48.4%)<br>
                                    Stabilizing in 2025<br>
                                    Reliable recurring revenue
                                </div>
                            </div>
                            <div>
                                <strong style="color: var(--gold);">üí∞ Revenue Impact:</strong>
                                <div style="margin-top: 4px; line-height: 1.6; color: var(--text-dark);">
                                    QAR 12.13M in 2025<br>
                                    ~QAR 1M monthly average<br>
                                    90% of Corporate revenue
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                ` : ''}
                
                <div class="system-capabilities">
                    <h4 style="font-size: 20px; margin-bottom: 20px; color: var(--primary-blue); text-align: center;">
                        üéØ Complete System Capabilities for this Role
                    </h4>
                    ${capabilitiesHtml}
                </div>
                
                <div class="action-buttons">
                    ${demo.actions.map((action, index) => `
                        <button class="action-btn ${index === 0 ? 'primary' : 'secondary'}" 
                                onclick="alert('‚ú® ${action}\\n\\nThis feature is available in the full system.')">
                            ${action}
                        </button>
                    `).join('')}
                </div>
            `;
            
            content.innerHTML = html;
            modal.classList.add('active');
        }

        function closeModal() {
            const modal = document.getElementById('roleModal');
            modal.classList.remove('active');
            // Exit fullscreen if active
            if (document.fullscreenElement) {
                document.exitFullscreen();
            }
        }

        function toggleFullscreen() {
            const modal = document.getElementById('roleModal');
            
            if (!document.fullscreenElement) {
                // Enter fullscreen
                if (modal.requestFullscreen) {
                    modal.requestFullscreen();
                } else if (modal.webkitRequestFullscreen) { /* Safari */
                    modal.webkitRequestFullscreen();
                } else if (modal.msRequestFullscreen) { /* IE11 */
                    modal.msRequestFullscreen();
                }
            } else {
                // Exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }
        }

        // Listen for fullscreen changes to update button
        document.addEventListener('fullscreenchange', updateFullscreenButton);
        document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
        document.addEventListener('msfullscreenchange', updateFullscreenButton);

        function updateFullscreenButton() {
            const btn = document.querySelector('.fullscreen-btn');
            if (btn) {
                const icon = btn.querySelector('.fullscreen-icon');
                const text = btn.querySelector('.fullscreen-text');
                if (document.fullscreenElement) {
                    icon.textContent = '‚õ∂';
                    text.textContent = 'Exit Fullscreen';
                } else {
                    icon.textContent = '‚õ∂';
                    text.textContent = 'Fullscreen';
                }
            }
        }

        function showFeatureDetails(featureKey) {
            const features = {
                'fee-management': {
                    title: 'üìä Fee Management System',
                    description: 'Comprehensive fee definition and management across all banking segments',
                    details: [
                        '<strong>Retail Mass (11 Fees):</strong> Local transfers, FX markup, ATM fees, cards, checkbooks, SMS alerts',
                        '<strong>Retail Private (5 Fees):</strong> Preferential rates, platinum cards, premium services',
                        '<strong>Retail Tamayuz (4 Fees):</strong> VIP package with most fees waived',
                        '<strong>Corporate Trade (8 Fees):</strong> LC opening, standby LC, guarantees, amendments',
                        '<strong>Corporate Services (5 Fees):</strong> Cash management, payroll, cards, advisory',
                        '<strong>Corporate WPS Services (1 Fee - NEW):</strong> WPS Salary File Processing Fee | PL52018 | QAR 12.1M (2025)',
                        '<strong>Corporate FX (3 Fees):</strong> Transactions, forwards, swaps'
                    ],
                    capabilities: [
                        'Single source of truth for all 47+ fees',
                        'WPS: 6-year historical data (2020-2025)',
                        'Hierarchical fee structure',
                        'Segment-based pricing',
                        'Fee version control',
                        'Effective date management',
                        'Fee calculator integration'
                    ]
                },
                'threshold': {
                    title: 'üéØ Threshold Control System',
                    description: 'Global and fee-specific threshold management with CEO authority',
                    details: [
                        '<strong>Global Threshold:</strong> CEO sets annual threshold (98% for 2026)',
                        '<strong>Fee-Specific Exceptions:</strong> Individual thresholds per fee',
                        '<strong>GM Acknowledgments:</strong> Mandatory GM review and acceptance',
                        '<strong>Approval Workflow:</strong> Hierarchical threshold approval',
                        '<strong>Compliance Tracking:</strong> Real-time threshold monitoring',
                        '<strong>Historical Trends:</strong> Year-over-year threshold analysis'
                    ],
                    capabilities: [
                        'CEO-level threshold setting',
                        'Fee-level threshold overrides',
                        'Automatic notification system',
                        'Approval workflow management',
                        'Threshold violation alerts',
                        'Audit trail for all changes'
                    ]
                },
                'exemptions': {
                    title: 'üìã Exemptions Management',
                    description: 'Three-tier exemption system with full governance and audit',
                    details: [
                        '<strong>Sector Exemptions:</strong> Industry-based exemptions (Government, Healthcare, Education, etc.)',
                        '<strong>Permanent Exemptions:</strong> Long-term customer exemptions with justification',
                        '<strong>Temporary Exemptions:</strong> Time-bound exemptions with expiry dates',
                        '<strong>Justification Required:</strong> Mandatory business case for all exemptions',
                        '<strong>Approval Workflow:</strong> Multi-level approval (GM ‚Üí CEO)',
                        '<strong>Impact Analysis:</strong> Revenue impact tracking per exemption'
                    ],
                    capabilities: [
                        'Multi-tier exemption types',
                        'Justification workflow',
                        'Expiry date management',
                        'Revenue impact calculation',
                        'Exemption audit reports',
                        'Compliance monitoring'
                    ]
                },
                'satisfaction': {
                    title: 'üìà Satisfaction Engine',
                    description: '4-state satisfaction calculation based on Expected vs Actual performance',
                    details: [
                        '<strong>State 1 - Not Satisfied:</strong> Below threshold, needs attention',
                        '<strong>State 2 - Conditionally Eligible:</strong> Approaching threshold, pending GM acknowledgment',
                        '<strong>State 3 - Pending CEO:</strong> GM acknowledged, awaiting CEO approval',
                        '<strong>State 4 - Satisfied:</strong> CEO approved, threshold met',
                        '<strong>Real-time Calculation:</strong> Automatic satisfaction updates'
                    ],
                    capabilities: [
                        '4-state satisfaction model',
                        'Real-time calculation engine',
                        'Automatic state transitions',
                        'Notification triggers',
                        'Historical satisfaction tracking',
                        'Trend analysis and forecasting'
                    ]
                },
                'reports': {
                    title: 'üìÑ Comprehensive Reporting',
                    description: '5 report types with multiple export formats for all stakeholders',
                    details: [
                        '<strong>Fee Performance Report:</strong> Revenue, collection rates, satisfaction by fee',
                        '<strong>Exemptions Report:</strong> All exemptions with justifications and impact',
                        '<strong>Satisfaction Status Report:</strong> All fees with current satisfaction state',
                        '<strong>Threshold Compliance Report:</strong> Threshold violations and exceptions',
                        '<strong>Audit Trail Report:</strong> Complete system activity log',
                        '<strong>Export Formats:</strong> PDF and Excel for all reports'
                    ],
                    capabilities: [
                        '5 comprehensive report types',
                        'PDF and Excel export',
                        'Scheduled report generation',
                        'Email distribution',
                        'Custom date ranges',
                        'Drill-down capabilities'
                    ]
                },
                'security': {
                    title: 'üîí Enterprise Security',
                    description: 'Multi-layered security with RBAC, audit trails, and maker/checker controls',
                    details: [
                        '<strong>JWT Authentication:</strong> Secure token-based authentication',
                        '<strong>Role-Based Access:</strong> 15 granular roles (CEO, GMs, AGMs, Managers, etc.)',
                        '<strong>Audit Logging:</strong> All actions logged with user, timestamp, IP',
                        '<strong>Maker/Checker:</strong> Four-eyes principle for critical operations',
                        '<strong>Session Management:</strong> Secure session handling and timeout',
                        '<strong>Data Encryption:</strong> Encrypted data at rest and in transit'
                    ],
                    capabilities: [
                        'JWT token authentication',
                        '15 hierarchical roles',
                        'Complete audit trail',
                        'Maker/checker workflow',
                        'Password encryption (bcrypt)',
                        'SQL injection prevention',
                        'CORS protection',
                        'Session timeout management'
                    ]
                }
            };

            const feature = features[featureKey];
            const modal = document.getElementById('roleModal');
            const content = document.getElementById('modalContent');

            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0;">${feature.title}</h2>
                    <button onclick="toggleFullscreen()" class="fullscreen-btn" title="Fullscreen / Exit Fullscreen">
                        <span class="fullscreen-icon">‚õ∂</span>
                        <span class="fullscreen-text">Fullscreen</span>
                    </button>
                </div>
                <p style="font-size: 18px; color: var(--text-gray); margin-bottom: 24px;">${feature.description}</p>
                
                <div class="dashboard-preview">
                    <div class="preview-section">
                        <h4>üìã Details</h4>
                        <ul style="list-style: none; padding: 0;">
                            ${feature.details.map(detail => `
                                <li style="padding: 8px 0; padding-left: 24px; position: relative; color: var(--text-gray);">
                                    <span style="position: absolute; left: 0; color: var(--gold); font-weight: bold;">‚óÜ</span>
                                    ${detail}
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
                
                <div class="system-capabilities">
                    <h4 style="font-size: 18px; margin-bottom: 16px; color: var(--primary-blue);">
                        üéØ System Capabilities
                    </h4>
                    <ul class="capability-list">
                        ${feature.capabilities.map(cap => `<li>${cap}</li>`).join('')}
                    </ul>
                </div>
            `;

            content.innerHTML = html;
            modal.classList.add('active');
        }

        // Close modal on outside click
        document.getElementById('roleModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>